# é¦–å°”è‡ªè¡Œè½¦éœ€æ±‚é¢„æµ‹ - å¢å¼ºç‰ˆæ•°æ®åˆ†ææµç¨‹

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®ä¸ºCDS503è¯¾ç¨‹çš„é¦–å°”è‡ªè¡Œè½¦å…±äº«ç³»ç»Ÿéœ€æ±‚é¢„æµ‹é¡¹ç›®ï¼Œæä¾›äº†å®Œæ•´çš„æ•°æ®åˆ†ææµæ°´çº¿ï¼ŒåŒ…å«æ•°æ®æ¢ç´¢ã€æ·±åº¦åˆ†æå’Œæ™ºèƒ½é¢„å¤„ç†ä¸‰ä¸ªä¸»è¦é˜¶æ®µã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ ¸å¿ƒç»„ä»¶

```
project/
â”œâ”€â”€ config.py                    # ç»Ÿä¸€é…ç½®ç®¡ç†
â”œâ”€â”€ utils.py                     # é€šç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ main_pipeline.py             # ä¸»æµç¨‹æ§åˆ¶è„šæœ¬
â”œâ”€â”€ enhanced_data_exploration.py # å¢å¼ºç‰ˆæ•°æ®æ¢ç´¢
â”œâ”€â”€ enhanced_data_analysis.py    # å¢å¼ºç‰ˆæ·±åº¦åˆ†æ  
â”œâ”€â”€ enhanced_data_preprocessing.py # å¢å¼ºç‰ˆæ•°æ®é¢„å¤„ç†
â”œâ”€â”€ SeoulBikeData.csv           # åŸå§‹æ•°æ®æ–‡ä»¶
â””â”€â”€ outputs/                    # è¾“å‡ºç›®å½•
    â”œâ”€â”€ figures/               # å›¾è¡¨æ–‡ä»¶
    â”œâ”€â”€ results/               # åˆ†æç»“æœ
    â”œâ”€â”€ eda/                   # æ¢ç´¢æ€§åˆ†æç»“æœ
    â”œâ”€â”€ analysis/              # æ·±åº¦åˆ†æç»“æœ
    â”œâ”€â”€ preprocessing/         # é¢„å¤„ç†ç»“æœ
    â””â”€â”€ pipeline/              # å®Œæ•´æµç¨‹ç»“æœ
```

### æ”¹è¿›äº®ç‚¹

1. **ğŸ”§ ç»Ÿä¸€é…ç½®ç®¡ç†**: `config.py`é›†ä¸­ç®¡ç†æ‰€æœ‰å‚æ•°
2. **ğŸ› ï¸ é€šç”¨å·¥å…·åº“**: `utils.py`æä¾›å¯å¤ç”¨çš„å·¥å…·ç±»
3. **ğŸ“Š æ™ºèƒ½æ—¥å¿—ç³»ç»Ÿ**: è‡ªåŠ¨è®°å½•å’Œä¿å­˜åˆ†æè¿‡ç¨‹
4. **ğŸ’¾ ç»“æ„åŒ–è¾“å‡º**: è‡ªåŠ¨ç»„ç»‡å’Œä¿å­˜æ‰€æœ‰ç»“æœ
5. **ğŸ” é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
6. **âš¡ æ¨¡å—åŒ–è®¾è®¡**: é«˜å†…èšä½è€¦åˆçš„æ¶æ„

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

```bash
pip install pandas numpy matplotlib seaborn scikit-learn scipy
```

### åŸºæœ¬ä½¿ç”¨

1. **è¿è¡Œå®Œæ•´æµæ°´çº¿ï¼ˆæ¨èï¼‰**:
```bash
python main_pipeline.py --stage all
```

2. **åªè¿è¡Œæ•°æ®æ¢ç´¢**:
```bash
python main_pipeline.py --stage eda
```

3. **è·³è¿‡æ·±åº¦åˆ†æ**:
```bash
python main_pipeline.py --stage all --no-deep-analysis
```

4. **ä½¿ç”¨æ»åç‰¹å¾**ï¼ˆæ³¨æ„æ•°æ®æ³„éœ²é£é™©ï¼‰:
```bash
python main_pipeline.py --stage all --use-lag-features
```

5. **æŒ‡å®šç‰¹å¾é€‰æ‹©æ–¹æ³•**:
```bash
python main_pipeline.py --stage all --feature-selection rfe
```

### é«˜çº§ç”¨æ³•

```python
# ç¨‹åºåŒ–è°ƒç”¨
from main_pipeline import BikeDataPipeline

# åˆ›å»ºæµæ°´çº¿
pipeline = BikeDataPipeline()

# è¿è¡Œå®Œæ•´æµç¨‹
complete_results, preprocessing_data = pipeline.run_complete_pipeline(
    include_deep_analysis=True,
    use_lag_features=False,
    feature_selection_method='correlation'
)

# è·å–é¢„å¤„ç†åçš„æ•°æ®
X_train, X_val, X_test, y_train, y_val, y_test, results = preprocessing_data
```

## ğŸ“Š æµç¨‹è¯¦è§£

### é˜¶æ®µ1ï¼šæ•°æ®æ¢ç´¢åˆ†æ (EDA)

**åŠŸèƒ½æ¨¡å—**:
- âœ… æ•°æ®åŠ è½½ä¸éªŒè¯
- ğŸ“ˆ ç›®æ ‡å˜é‡æ·±åº¦åˆ†æ  
- ğŸ”¢ æ•°å€¼ç‰¹å¾ç›¸å…³æ€§åˆ†æ
- ğŸ·ï¸ åˆ†ç±»ç‰¹å¾åˆ†å¸ƒåˆ†æ
- â° æ—¶é—´æ¨¡å¼æŒ–æ˜
- ğŸŒ¤ï¸ å¤©æ°”å½±å“è¯„ä¼°

**ä¸»è¦è¾“å‡º**:
- ç›¸å…³æ€§çŸ©é˜µçƒ­åŠ›å›¾
- ç›®æ ‡å˜é‡åˆ†å¸ƒå›¾
- æ—¶é—´åºåˆ—æ¨¡å¼å›¾
- ç»¼åˆEDAç»“æœJSON

### é˜¶æ®µ2ï¼šæ·±åº¦æ•°æ®æ´å¯Ÿåˆ†æ

**åŠŸèƒ½æ¨¡å—**:
- ğŸ¯ é«˜çº§ç»Ÿè®¡ç‰¹å¾åˆ†æ
- ğŸ” é›¶å€¼æ¨¡å¼æ·±åº¦æŒ–æ˜
- ğŸ“Š åŒå³°æ—¶é—´æ¨¡å¼åˆ†æ
- ğŸŒ¡ï¸ å¤åˆå¤©æ°”æ¡ä»¶åˆ†æ
- ğŸ“ˆ éœ€æ±‚åˆ†å±‚åˆ†å‰²åˆ†æ
- ğŸ¤– é¢„æµ‹æ€§æ´å¯Ÿç”Ÿæˆ

**ä¸»è¦è¾“å‡º**:
- æ·±åº¦ç»Ÿè®¡åˆ†ææŠ¥å‘Š
- é¢„æµ‹æ€§å»ºæ¨¡å»ºè®®
- ç‰¹å¾é‡è¦æ€§åˆæ­¥è¯„ä¼°

### é˜¶æ®µ3ï¼šæ™ºèƒ½æ•°æ®é¢„å¤„ç†

**åŠŸèƒ½æ¨¡å—**:
- ğŸ• æ™ºèƒ½æ—¶é—´ç‰¹å¾å·¥ç¨‹
- ğŸŒ¤ï¸ é«˜çº§å¤©æ°”ç‰¹å¾åˆ›å»º
- ğŸ’¡ èˆ’é€‚åº¦æŒ‡æ•°è®¡ç®—
- ğŸ”— äº¤äº’ç‰¹å¾ç”Ÿæˆ
- ğŸ“Š ç‰¹å¾é€‰æ‹©ä¼˜åŒ–
- âš–ï¸ æ•°æ®æ ‡å‡†åŒ–

**ä¸»è¦è¾“å‡º**:
- è®­ç»ƒ/éªŒè¯/æµ‹è¯•æ•°æ®é›†
- ç‰¹å¾åç§°åˆ—è¡¨
- é¢„å¤„ç†å™¨çŠ¶æ€æ–‡ä»¶
- é¢„å¤„ç†é…ç½®è®°å½•

## ğŸ”§ é…ç½®è¯´æ˜

### ä¿®æ”¹é…ç½®å‚æ•°

ç¼–è¾‘ `config.py` æ–‡ä»¶ä¸­çš„ç›¸å…³å‚æ•°ï¼š

```python
# æ•°æ®å¤„ç†é…ç½®
DATA_CONFIG = {
    'target_column': 'Rented Bike Count',
    'train_ratio': 0.7,
    'val_ratio': 0.15,
    'test_ratio': 0.15
}

# ç‰¹å¾å·¥ç¨‹é…ç½®  
FEATURE_CONFIG = {
    'interaction_features': True,
    'lag_features': False,
    'outlier_method': 'iqr',
    'scaling_method': 'standard'
}
```

### å¤©æ°”é˜ˆå€¼è°ƒæ•´

```python
'weather_thresholds': {
    'temp_ranges': [-50, 0, 10, 20, 30, 50],
    'humidity_ranges': [0, 30, 50, 70, 100],
    'wind_ranges': [0, 2, 4, 6, 20]
}
```

## ğŸ“ è¾“å‡ºæ–‡ä»¶è¯´æ˜

### æ–‡ä»¶å‘½åè§„åˆ™

æ‰€æœ‰è¾“å‡ºæ–‡ä»¶éƒ½å¸¦æœ‰æ—¶é—´æˆ³ï¼Œæ ¼å¼ä¸ºï¼š`{åŠŸèƒ½}_{æ—¶é—´æˆ³}.{æ‰©å±•å}`

### ä¸»è¦è¾“å‡ºæ–‡ä»¶

1. **æ•°æ®æ¢ç´¢ç»“æœ**:
   - `comprehensive_eda_results_{timestamp}.json`
   - `target_distribution_{timestamp}.png`
   - `correlation_matrix_{timestamp}.png`
   - `time_series_{timestamp}.png`

2. **æ·±åº¦åˆ†æç»“æœ**:
   - `deep_analysis_results_{timestamp}.json`

3. **é¢„å¤„ç†ç»“æœ**:
   - `X_train_{timestamp}.npy` / `y_train_{timestamp}.npy`
   - `X_val_{timestamp}.npy` / `y_val_{timestamp}.npy`  
   - `X_test_{timestamp}.npy` / `y_test_{timestamp}.npy`
   - `feature_names_{timestamp}.json`
   - `preprocessor_{timestamp}.pkl`

4. **å®Œæ•´æµç¨‹ç»“æœ**:
   - `complete_pipeline_results_{timestamp}.json`

## ğŸ” å…³é”®åŠŸèƒ½ç‰¹æ€§

### 1. æ™ºèƒ½ç‰¹å¾å·¥ç¨‹

åŸºäºæ•°æ®æ´å¯Ÿåˆ›å»ºçš„é«˜çº§ç‰¹å¾ï¼š

```python
# åŒå³°æ—¶é—´æ¨¡å¼ç‰¹å¾
'Hour_Morning_Peak'    # æ—©é«˜å³° (8-9ç‚¹)
'Hour_Evening_Peak'    # æ™šé«˜å³° (17-19ç‚¹)
'Is_Rush_Hour'         # é€šå‹¤æ—¶é—´æ ‡è¯†

# å¤©æ°”èˆ’é€‚åº¦ç‰¹å¾  
'Comfort_Index'        # åŸºäºæ¸©æ¹¿åº¦çš„èˆ’é€‚åº¦æŒ‡æ•°
'Perfect_Weather'      # å®Œç¾å¤©æ°”æ ‡è¯†
'Extreme_Weather'      # æç«¯å¤©æ°”æ ‡è¯†

# æ™ºèƒ½äº¤äº’ç‰¹å¾
'Temp_Peak'           # æ¸©åº¦Ã—é«˜å³°æ—¶æ®µ
'Comfort_Weekend'     # èˆ’é€‚åº¦Ã—å‘¨æœ«
```

### 2. æ—¶é—´åºåˆ—å‹å¥½è®¾è®¡

- âœ… ä¸¥æ ¼æŒ‰æ—¶é—´é¡ºåºåˆ†å‰²æ•°æ®
- âœ… é¿å…æ•°æ®æ³„éœ²çš„ç‰¹å¾å·¥ç¨‹
- âœ… æ—¶é—´åºåˆ—äº¤å‰éªŒè¯æ”¯æŒ
- âœ… æ»åç‰¹å¾çš„è°¨æ…ä½¿ç”¨

### 3. å¼‚å¸¸å€¼ç¨³å¥å¤„ç†

- ğŸ›¡ï¸ ä½¿ç”¨Winsorizationè€Œéåˆ é™¤
- ğŸ“Š åŸºäºIQRçš„å¼‚å¸¸å€¼æ£€æµ‹
- âš–ï¸ å¯é…ç½®çš„å¼‚å¸¸å€¼å¤„ç†ç­–ç•¥

## ğŸ¯ å®éªŒå»ºè®®

åŸºäºæµç¨‹åˆ†æç»“æœï¼Œå»ºè®®çš„å®éªŒé¡ºåºï¼š

1. **å®éªŒ1ï¼šç®—æ³•æ¯”è¾ƒ**
   - ä½¿ç”¨é¢„å¤„ç†åçš„æ•°æ®
   - æ¯”è¾ƒçº¿æ€§å›å½’ã€éšæœºæ£®æ—ã€XGBoostã€SVR
   - é‡ç‚¹å…³æ³¨RMSEå’ŒRÂ²æŒ‡æ ‡

2. **å®éªŒ2ï¼šç‰¹å¾é€‰æ‹©ä¼˜åŒ–**  
   - å°è¯•ä¸åŒç‰¹å¾é€‰æ‹©æ–¹æ³•
   - åˆ†æç‰¹å¾æ•°é‡vsæ€§èƒ½çš„å…³ç³»
   - éªŒè¯ç‰¹å¾å·¥ç¨‹çš„æœ‰æ•ˆæ€§

3. **å®éªŒ3ï¼šé›†æˆå­¦ä¹ **
   - åŸºäºæœ€ä½³åŸºç¡€æ¨¡å‹æ„å»ºé›†æˆ
   - å°è¯•Votingã€Stackingç­‰æ–¹æ³•
   - å¹³è¡¡æ€§èƒ½æå‡ä¸å¤æ‚åº¦

4. **å®éªŒ4ï¼šæ ·æœ¬å¤§å°åˆ†æ**
   - åˆ†æå­¦ä¹ æ›²çº¿
   - ç¡®å®šæœ€å°‘æ•°æ®éœ€æ±‚
   - è¯„ä¼°æ•°æ®æ”¶é›†æˆæœ¬æ•ˆç›Š

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### ä¸»è¦è¯„ä¼°æŒ‡æ ‡

- **RMSE**: å‡æ–¹æ ¹è¯¯å·®ï¼ˆä¸»è¦æŒ‡æ ‡ï¼Œç›®æ ‡ < 200ï¼‰
- **MAE**: å¹³å‡ç»å¯¹è¯¯å·®
- **RÂ²**: å†³å®šç³»æ•°ï¼ˆç›®æ ‡ > 0.75ï¼‰
- **MAPE**: å¹³å‡ç»å¯¹ç™¾åˆ†æ¯”è¯¯å·®ï¼ˆç›®æ ‡ < 25%ï¼‰

### æˆåŠŸæ ‡å‡†

æ ¹æ®ä¸šåŠ¡éœ€æ±‚è®¾å®šçš„æ€§èƒ½é˜ˆå€¼ï¼š

```python
'performance_thresholds': {
    'rmse_threshold': 200,
    'r2_threshold': 0.75,
    'mape_threshold': 25
}
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç¼–ç é”™è¯¯**:
   ```bash
   UnicodeDecodeError: 'utf-8' codec can't decode...
   ```
   **è§£å†³**: ç¨‹åºè‡ªåŠ¨å°è¯•å¤šç§ç¼–ç ï¼Œå¦‚ä»æœ‰é—®é¢˜è¯·æ£€æŸ¥æ•°æ®æ–‡ä»¶

2. **å†…å­˜ä¸è¶³**:
   ```bash
   MemoryError: Unable to allocate array...
   ```
   **è§£å†³**: å‡å°‘ç‰¹å¾æ•°é‡æˆ–ä½¿ç”¨ç‰¹å¾é€‰æ‹©

3. **å¯¼å…¥é”™è¯¯**:
   ```bash
   ImportError: No module named 'sklearn'
   ```
   **è§£å†³**: å®‰è£…æ‰€éœ€ä¾èµ–åŒ…

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—è¾“å‡ºï¼š

```bash
python main_pipeline.py --stage all --verbose
```

æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼š`outputs/project.log`

## ğŸ“ å¼€å‘è¯´æ˜

### æ‰©å±•æ–°åŠŸèƒ½

1. **æ·»åŠ æ–°çš„ç‰¹å¾å·¥ç¨‹**:
   - åœ¨ `enhanced_data_preprocessing.py` ä¸­æ·»åŠ æ–°æ–¹æ³•
   - æ›´æ–° `config.py` ä¸­çš„ç›¸å…³é…ç½®

2. **æ·»åŠ æ–°çš„åˆ†ææ¨¡å—**:
   - ç»§æ‰¿ç°æœ‰çš„åŸºç¡€ç±»
   - ä½¿ç”¨ç»Ÿä¸€çš„æ—¥å¿—å’Œä¿å­˜æ¥å£

3. **ä¿®æ”¹é…ç½®å‚æ•°**:
   - é›†ä¸­åœ¨ `config.py` ä¸­ä¿®æ”¹
   - é¿å…ç¡¬ç¼–ç å‚æ•°

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ç±»å‹æç¤º
- æ·»åŠ è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²
- éµå¾ªç»Ÿä¸€çš„å‘½åè§„èŒƒ
- ä½¿ç”¨ç»Ÿä¸€çš„æ—¥å¿—è®°å½•

## ğŸ‰ æ€»ç»“

æœ¬å¢å¼ºç‰ˆæ•°æ®åˆ†ææµç¨‹æä¾›äº†ï¼š

- âœ… **å®Œæ•´æ€§**: ä»æ•°æ®æ¢ç´¢åˆ°é¢„å¤„ç†çš„å®Œæ•´æµç¨‹
- âœ… **æ™ºèƒ½æ€§**: åŸºäºæ•°æ®æ´å¯Ÿçš„ç‰¹å¾å·¥ç¨‹
- âœ… **ç¨³å¥æ€§**: å®Œå–„çš„é”™è¯¯å¤„ç†å’ŒéªŒè¯
- âœ… **å¯é…ç½®æ€§**: çµæ´»çš„å‚æ•°é…ç½®ç³»ç»Ÿ
- âœ… **å¯æ‰©å±•æ€§**: æ¨¡å—åŒ–çš„è®¾è®¡æ¶æ„
- âœ… **å¯é‡ç°æ€§**: è¯¦ç»†çš„æ—¥å¿—å’ŒçŠ¶æ€ä¿å­˜

å‡†å¤‡å¥½å¼€å§‹æ‚¨çš„æœºå™¨å­¦ä¹ å®éªŒäº†ï¼ğŸš€ 